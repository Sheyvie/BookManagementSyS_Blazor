@page "/"

<div col="4" class="mt-5"> 
    
    <AddBook AddNewBook="AddNewBook" UpdateBook ="UpdateBook" SelectedBook ="SelectedBook"/>
</div>
<div col="5"><DisplayBook/>
    </div>
    @if(books.Count == 0)
{
    <p> No books available</p>
}
else
{
    @foreach (var book in books)
    {
        <DisplayBook bookDto="book"  DeleteId="DeleteBook" EditBook="EditBook"/>
    }
}

@code {
    public BookDto SelectedBook;
    
    private List<BookDto> books = new List<BookDto>()
   {
       new BookDto()
      {
        Id = Guid.NewGuid ()
      
      }
   };

    public void AddNewBook(BookDto book)
    {
        this.books.Add(book);
    }
    public void DeleteBook(Guid id)
    {
        try
        {
            var bookDelete = this.books.Find(x => x.Id == id);
            this.books.Remove(bookDelete);
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }
    }
    public void UpdateBook(BookDto books)
    {
        var updatebookIndex = this.books.FindIndex(x => x.Id == books.Id);
        this.books[updatebookIndex] = books;
    }

    public void EditBook(BookDto books)
    {
        SelectedBook = books;
    }

}
